<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="dark">
<title>Settings — FAOA</title>
<style>
:root{ --bg:#000; --panel:#0f1116; --panel2:#121318; --ink:#eef3ff; --ink-dim:#cfd3e1; --stroke:rgba(255,255,255,.18); --blue:#0A84FF }
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font:16px -apple-system,BlinkMacSystemFont,"SF Pro Text"}
header{position:sticky;top:0;z-index:5;background:linear-gradient(180deg,rgba(0,0,0,.9),rgba(0,0,0,.65));-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid var(--stroke)}
.bar{display:flex;align-items:center;gap:8px;height:52px;padding:0 10px}
.back{width:36px;height:36px;border-radius:10px;border:1px solid var(--stroke);background:#15171f;color:#fff;font-weight:900;display:flex;align-items:center;justify-content:center;cursor:pointer}
.bar h1{margin:0;font:900 20px/1 -apple-system}
main{max-width:760px;margin:0 auto;padding:12px}
.card{background:var(--panel);border:1px solid var(--stroke);border-radius:14px;margin:12px 0;overflow:hidden}
.row{display:flex;align-items:center;justify-content:space-between;padding:14px 12px;border-bottom:1px solid rgba(255,255,255,.08)}
.row:last-child{border-bottom:none}
strong{font-weight:900}
.switch{position:relative;display:inline-block;width:52px;height:30px}
.switch input{display:none}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#2a2a2a;border-radius:999px;border:1px solid var(--stroke);transition:.2s}
.slider:before{content:"";position:absolute;height:24px;width:24px;left:3px;top:2px;background:white;border-radius:50%;transition:.2s}
input:checked + .slider{background:var(--blue)}
input:checked + .slider:before{transform:translateX(22px)}
.btn{display:inline-flex;align-items:center;justify-content:center;height:40px;padding:0 14px;border-radius:10px;border:1px solid var(--stroke);background:#181b22;color:#fff;font-weight:800;cursor:pointer}
.btn.blue{background:var(--blue);border-color:transparent;color:#000}
.chips{display:flex;gap:8px;flex-wrap:wrap;padding:12px}
.chips button{padding:8px 12px;border:1px dashed rgba(255,255,255,.18);border-radius:999px;background:#0b0c10;color:#fff;cursor:grab}
small.note{color:var(--ink-dim);display:block;margin:8px 2px}
</style>
</head>
<body>
<header><div class="bar">
  <button class="back" id="backBtn">‹</button>
  <h1>Settings</h1>
</div></header>

<main>
  <div class="card">
    <div class="row"><strong>Show “Challenges” tab</strong><label class="switch"><input id="showChallenges" type="checkbox"><span class="slider"></span></label></div>
    <div class="row"><strong>Show “Courses” tab</strong><label class="switch"><input id="showCourses" type="checkbox"><span class="slider"></span></label></div>
    <div class="row"><strong>Show “Live” tab</strong><label class="switch"><input id="showLive" type="checkbox"><span class="slider"></span></label></div>
  </div>
  <small class="note">Hidden tabs disappear on Home; remaining tabs snap into place.</small>

  <div class="card">
    <div class="row" style="justify-content:flex-start;gap:10px"><strong>Tab Order</strong></div>
    <div class="chips" id="orderChips"></div>
  </div>

  <div class="card">
    <div class="row"><strong>Hide Weekly Challenge</strong><label class="switch"><input id="hideWeekly" type="checkbox"><span class="slider"></span></label></div>
    <div class="row"><strong>Gift Today’s Daily Challenge</strong><button class="btn" id="giftBtn" type="button">Gift</button></div>
  </div>

  <div style="display:flex;gap:10px;flex-wrap:wrap;margin:12px 2px">
    <button class="btn blue" id="saveBtn" type="button">Save</button>
    <a class="btn" href="profile.html">Profile</a>
    <a class="btn" href="mydata.html">My Data</a>
  </div>
</main>

<script>
(()=>{'use strict';
const KEY='ao_settings';
const $=s=>document.querySelector(s);
const store={ get:(k,f)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},
              set:(k,v)=>localStorage.setItem(k,JSON.stringify(v)) };
const defaults={challenges:true,courses:true,live:true,order:['challenges','courses','live'],hideWeekly:false};

function goBack(){ if(history.length>1) history.back(); }
$('#backBtn').addEventListener('click', goBack);

function load(){
  const s=Object.assign({},defaults, store.get(KEY,{}));
  $('#showChallenges').checked=s.challenges!==false;
  $('#showCourses').checked=s.courses!==false;
  $('#showLive').checked=s.live!==false;
  $('#hideWeekly').checked=!!s.hideWeekly;
  const chips=$('#orderChips'); chips.innerHTML='';
  (s.order&&s.order.length?s.order:defaults.order).forEach(t=>{
    const b=document.createElement('button'); b.textContent=t[0].toUpperCase()+t.slice(1); b.dataset.tab=t; b.draggable=true; chips.appendChild(b);
  });
  chips.addEventListener('dragstart',e=>{ if(e.target.tagName!=='BUTTON') return; e.dataTransfer.setData('text/plain',e.target.dataset.tab); });
  chips.addEventListener('dragover',e=>e.preventDefault());
  chips.addEventListener('drop',e=>{
    e.preventDefault();
    const from=e.dataTransfer.getData('text/plain');
    const target=e.target.closest('button'); if(!from||!target) return;
    const fromEl=[...chips.children].find(x=>x.dataset.tab===from);
    chips.insertBefore(fromEl, target);
  });
}
load();

$('#saveBtn').addEventListener('click', ()=>{
  const order=[...document.querySelectorAll('#orderChips button')].map(b=>b.dataset.tab);
  const s={
    challenges: $('#showChallenges').checked,
    courses: $('#showCourses').checked,
    live: $('#showLive').checked,
    hideWeekly: $('#hideWeekly').checked,
    order
  };
  store.set(KEY,s);
  alert('Saved');
});

$('#giftBtn').addEventListener('click', ()=>{
  const subject=encodeURIComponent('I’m gifting you today’s Daily Challenge');
  const body=encodeURIComponent('Enjoy today’s challenge in FAOA!');
  location.href=`mailto:?subject=${subject}&body=${body}`;
});
})();
</script>
</body>
</html>