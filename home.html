<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="color-scheme" content="dark" />
<title>Home — FAOA</title>
<style>
:root{
  --ink:#eef3ff; --ink-dim:#cfd3e1; --muted:rgba(238,243,255,.78);
  --bg:#000; --stroke:rgba(255,255,255,.18);
  --blue:#0A84FF; --green:#32d74b; --gold:#ffd700; --silver:#c0c7d1; --bronze:#b87333; --red:#ff453a; --black:#111;
  --gap:12px; --r:14px; --maxw:1240px; --nav-h:68px;
  --btn-h:44px; --btn-bottom:14px; --chip-h:36px;
}
*{box-sizing:border-box}
html,body{height:100%;overflow-x:hidden}
body{margin:0;background:var(--bg);color:var(--ink);
  font:16px -apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;}
a{color:inherit;text-decoration:none}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
.hide{display:none!important}

/* Background */
.bg{position:fixed;inset:0;z-index:-1;background:#000 url("./assets/home-bg.jpg") center/cover no-repeat}

/* Header */
.nav{position:sticky;top:0;left:0;right:0;height:var(--nav-h);
  display:flex;align-items:center;justify-content:space-between;gap:8px;
  padding:8px 12px;z-index:40;
  background:linear-gradient(180deg,rgba(0,0,0,.85),rgba(0,0,0,.35) 60%,transparent);
  -webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);}
.btn-tab{display:inline-flex;align-items:center;justify-content:center;
  flex:1 1 0;min-width:0;max-width:120px;height:44px;padding:0 12px;
  border-radius:12px;border:1px solid var(--stroke);
  background:rgba(0,0,0,.55);color:var(--ink);font-weight:900;cursor:pointer;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  transition:transform .06s ease,filter .15s ease;
  font-size:clamp(13px,3.2vw,16px);}
.btn-tab:active{transform:translateY(1px)}
.btn-tab.is-active{background:var(--blue);border-color:transparent;color:#000}

/* Avatar pill */
.avatarTab{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;
  padding:6px 12px;border-radius:12px;min-width:120px;height:44px;
  font-weight:900;line-height:1.1;text-align:left;cursor:pointer}
.avatarTab .name{font-size:15px;font-weight:900}
.avatarTab .lvl{font-size:12px;opacity:.9;text-transform:capitalize}

/* Hero */
.hero{position:relative;overflow:hidden;background:#000;
  border:1px solid var(--stroke);border-radius:16px;
  padding:16px;margin:12px 0}
.hero .title{margin:0 0 6px;font-weight:900;font-size:20px}
.hero .meta{margin:0 0 6px;color:var(--ink-dim)}
.hero .desc{margin:8px 0 56px;color:var(--muted)}
.cta-left{position:absolute;left:16px;bottom:var(--btn-bottom);display:flex;gap:10px}

/* Tracker */
.tracker{cursor:pointer}
.tracker .cards{display:grid;grid-template-columns:1fr 1fr;gap:var(--gap)}
.tracker .card{border:1px solid var(--stroke);border-radius:12px;padding:12px;background:rgba(255,255,255,.03)}
.tracker .kpi{display:flex;align-items:center;gap:8px;color:var(--ink-dim);font-weight:700}
.medals{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin-top:10px}
.medalWrap{display:flex;flex-direction:column;align-items:center;gap:6px}
.medal{width:30px;height:30px;border-radius:50%;border:2px solid rgba(255,255,255,.22);
  display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:900;color:#fff}
.medal.empty{background:transparent;color:transparent;border-color:rgba(255,255,255,.18)}
.medal .tick{transform:translateY(-.5px)}
.medal-label{font-size:11px;color:var(--ink-dim);letter-spacing:.2px}
.m-bronze{background:var(--bronze)}
.m-silver{background:var(--silver);color:#111}
.m-gold{background:var(--gold);color:#111}
.m-black{background:var(--black);color:#fff}
.m-blue{background:var(--blue);color:#000}

/* Avatar drawer + subSheet */
#avatarSheet{position:fixed;inset:0;z-index:60;display:none;background:rgba(0,0,0,.45);
  -webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}
#avatarSheet.open{display:block}
#avatarSheet .panel{position:absolute;top:64px;right:12px;width:320px;max-height:70vh;overflow:auto;
  background:#0f1116;border:1px solid var(--stroke);border-radius:14px;padding:12px}
.menu a{display:flex;align-items:center;justify-content:space-between;padding:12px 10px;
  border-bottom:1px solid rgba(255,255,255,.08)}
#subSheet{position:fixed;inset:0;z-index:70;display:none;background:rgba(0,0,0,.55);
  -webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}
#subSheet.open{display:block}
#subSheet .inner{position:absolute;top:64px;right:12px;width:min(820px,calc(100% - 24px));
  height:min(78vh,calc(100% - 84px));background:#0f1116;border:1px solid var(--stroke);
  border-radius:14px;padding:12px;display:flex;flex-direction:column}
.sheet-head{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:4px 4px 10px}
.sheet-head h2{margin:0;font-size:22px;font-weight:900}
.sheet-close{width:36px;height:36px;border-radius:10px;border:1px solid var(--stroke);
  background:#121212;color:#fff;font-weight:900;cursor:pointer}
#subFrame{flex:1 1 auto;width:100%;height:100%;border:none;border-radius:12px;background:#0b0c10}
</style>
</head>
<body>
<div class="bg"></div>

<header class="nav">
  <div class="nav-left" role="tablist">
    <button class="btn-tab is-active" data-tab="challenges">Challenges</button>
    <button class="btn-tab" data-tab="courses">Courses</button>
    <button class="btn-tab" data-tab="live">Live</button>
  </div>
  <div class="nav-right">
    <button id="avatarTab" class="avatarTab">
      <span class="name" id="avatarName">User</span>
      <span class="lvl" id="avatarLvl">Intermediate</span>
    </button>
  </div>
</header>

<main class="wrap">
  <!-- Challenges -->
  <section id="panel-challenges" data-panel="challenges">
    <article class="hero tracker" id="trackerHero">
      <h2 class="title">Challenge Tracker</h2>
      <p class="meta">Daily 7d • Weekly 6w</p>
      <div class="cards">
        <div class="card">
          <div class="kpi">Daily 7d</div>
          <div class="medals" id="dailyMedals"></div>
        </div>
        <div class="card">
          <div class="kpi">Weekly 6w</div>
          <div class="medals" id="weeklyMedals"></div>
        </div>
      </div>
    </article>
  </section>

  <!-- Courses -->
  <section id="panel-courses" class="hide" data-panel="courses">
    <h2 class="section-title">Courses</h2>
  </section>

  <!-- Live -->
  <section id="panel-live" class="hide" data-panel="live">
    <h2 class="section-title">Live Sessions</h2>
  </section>
</main>

<!-- Avatar drawer -->
<div id="avatarSheet">
  <div class="panel">
    <nav class="menu">
      <a href="avatar/profile.html" data-pop="Profile">Profile<span>›</span></a>
      <a href="avatar/settings.html" data-pop="Settings">Settings<span>›</span></a>
      <a href="avatar/mydata.html" data-pop="My Data">My Data<span>›</span></a>
      <a href="avatar/challengetracker.html" data-pop="Challenge Tracker">Challenge Tracker<span>›</span></a>
    </nav>
  </div>
</div>

<!-- Sub sheet -->
<div id="subSheet">
  <div class="inner">
    <div class="sheet-head">
      <h2 id="sheetTitle">—</h2>
      <button class="sheet-close" id="sheetClose">×</button>
    </div>
    <iframe id="subFrame" title="Panel"></iframe>
  </div>
</div>

<script>
(()=>{'use strict';
const $=s=>document.querySelector(s);
const $$=s=>Array.from(document.querySelectorAll(s));
const store={get:(k,f)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};
const K={profile:'ao_profile',dailyDone:'ao_daily_done',weeklyDone:'ao_weekly_done',dailyMeta:'ao_daily_meta'};

const skinByLevel={bronze:'var(--bronze)',silver:'var(--silver)',gold:'var(--gold)',
                   support:'#663399',director:'#444',admin:'var(--blue)'};

/* Apply profile to avatar */
function applyProfile(){
  const p=store.get(K.profile,{displayName:'User',skill:'silver'});
  $('#avatarName').textContent=p.displayName||'User';
  $('#avatarLvl').textContent=(p.skill||'intermediate');
  $('#avatarTab').style.background=skinByLevel[p.skill]||'var(--silver)';
}
applyProfile();

/* Avatar drawer */
$('#avatarTab').addEventListener('click',()=>$('#avatarSheet').classList.add('open'));
$('#avatarSheet').addEventListener('click',e=>{if(e.target.id==='avatarSheet')$('#avatarSheet').classList.remove('open')});

/* Sub sheet open/close */
function openSubSheet(title,url){
  $('#sheetTitle').textContent=title;
  $('#subFrame').src=url+'?v='+Date.now();
  $('#subSheet').classList.add('open');
}
function closeSubSheet(){
  $('#subSheet').classList.remove('open');
  $('#subFrame').src='about:blank';
  applyProfile();
}
$('#sheetClose').addEventListener('click',closeSubSheet);
$('#subSheet').addEventListener('click',e=>{if(e.target.id==='subSheet')closeSubSheet()});

/* Intercept drawer links */
$$('#avatarSheet [data-pop]').forEach(a=>{
  a.addEventListener('click',e=>{
    e.preventDefault();
    $('#avatarSheet').classList.remove('open');
    openSubSheet(a.dataset.pop,a.getAttribute('href'));
  });
});

/* Tracker click opens challenge tracker */
$('#trackerHero').addEventListener('click',()=>openSubSheet('Challenge Tracker','avatar/challengetracker.html'));

/* Tracker medals (placeholder demo) */
function paintTracker(){
  const wrapD=$('#dailyMedals');wrapD.innerHTML='';
  for(let i=0;i<7;i++){const m=document.createElement('div');m.className='medal empty';wrapD.appendChild(m)}
  const wrapW=$('#weeklyMedals');wrapW.innerHTML='';
  for(let i=0;i<6;i++){const m=document.createElement('div');m.className='medal empty';wrapW.appendChild(m)}
}
paintTracker();
})();
</script>
</body>
</html>