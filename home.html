<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="color-scheme" content="dark" />
<title>Home — FAOA</title>

<style>
:root{
  --ink:#eef3ff; --ink-dim:#cfd3e1; --muted:rgba(238,243,255,.78);
  --bg:#000; --panel:#0a0c10; --stroke:rgba(255,255,255,.18);
  --blue:#0A84FF; --green:#32d74b; --red:#ff3b30; --chip:#1b1f2a;
  --gap:12px; --r:14px; --maxw:1240px; --nav-h:68px; --btn-h:44px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
  font:16px -apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;
  overscroll-behavior-y:contain; overflow-x:hidden}
a{color:inherit;text-decoration:none}
.bg{position:fixed;inset:0;z-index:-1;background:#000 url("./assets/home-bg.jpg") center/cover no-repeat}

/* Top bar */
.nav{position:fixed;top:0;left:0;right:0;height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;
  padding:8px 12px;z-index:50;background:linear-gradient(180deg,rgba(0,0,0,.9),rgba(0,0,0,.55) 60%,rgba(0,0,0,.3));
  -webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}
.btn-tab{display:inline-flex;align-items:center;justify-content:center;min-width:110px;height:44px;padding:0 14px;border-radius:12px;border:1px solid var(--stroke);
  background:rgba(0,0,0,.55);color:var(--ink);font-weight:900;cursor:pointer}
.btn-tab.is-active{background:var(--blue);border-color:transparent;color:#000}
.avatarTab{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:6px 12px;border-radius:12px;min-width:132px;height:44px;
  font-weight:900;line-height:1.1;text-align:left;cursor:pointer;border:1px solid var(--stroke);background:var(--blue);color:#0b0c10}
.avatarTab .name{font-size:15px;font-weight:900}
.avatarTab .lvl{font-size:12px;opacity:.95}

/* Layout */
.wrap{max-width:var(--maxw);margin:0 auto;padding:calc(var(--nav-h) + env(safe-area-inset-top) + 10px) 14px 120px}

/* Grid of heroes */
.grid{display:grid;gap:12px}
@media (max-width:600px){.grid{grid-template-columns:1fr}}
@media (min-width:601px) and (max-width:900px){.grid{grid-template-columns:1fr 1fr}}
@media (min-width:901px) and (max-width:1200px){.grid{grid-template-columns:1fr 1fr 1fr}}
@media (min-width:1201px){.grid{grid-template-columns:1fr 1fr 1fr 1fr}}

/* Hero card */
.hero{position:relative;overflow:hidden;background:#060708;border:1px solid var(--stroke);border-radius:16px;padding:16px;min-height:120px}
.hero .num{font-weight:900;font-size:16px;opacity:.9}
.hero .cta-left{position:absolute;left:16px;bottom:16px}
.btn{display:inline-flex;align-items:center;justify-content:center;min-width:120px;height:40px;padding:0 14px;border-radius:12px;border:1px solid var(--stroke);
  font-weight:900;background:#0f1116;color:var(--ink);cursor:pointer;z-index:1;position:relative}
.btn.blue{background:var(--blue);border-color:transparent;color:#000}

/* Admin chips */
.ctrls{position:absolute;top:10px;right:10px;display:flex;gap:8px;z-index:2}
.chip{height:28px;padding:0 10px;border-radius:999px;border:1px solid var(--stroke);background:var(--chip);color:#fff;font-weight:800;font-size:12px;cursor:pointer;z-index:2;position:relative}
.badge-live{background:#0a0}
.badge-off{background:#b00020}

/* Move popover */
.move{position:relative}
.move-menu{position:absolute;top:32px;right:0;background:#0f0f12;border:1px solid var(--stroke);border-radius:10px;padding:6px;display:none;z-index:10;min-width:220px}
.move-menu.open{display:block}
.move-menu button{display:block;width:100%;text-align:left;padding:8px 10px;border-radius:8px;border:1px solid var(--stroke);background:#141416;color:#fff;
  font-weight:800;font-size:12px;margin:4px 0;cursor:pointer}

/* Working Drawer */
#adminTab{position:fixed;left:0;right:0;bottom:0;height:42px;display:flex;align-items:center;justify-content:center;z-index:90}
#adminTab button{background:var(--red);color:#fff;border:0;border-top-left-radius:12px;border-top-right-radius:12px;padding:10px 16px;font-weight:900}
#adminDock{position:fixed;inset:0;transform:translateY(100%);transition:transform .2s ease;z-index:89;background:#0e0b0b}
#adminDock.open{transform:translateY(0)}
#adminDock header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#160b0b;color:#fff;font-weight:900;position:sticky;top:0;z-index:2}
#adminDock header .title{color:#ff5a52}
#adminDock .dev{padding:12px}
#adminDock .dev h3{margin:0 0 8px;color:#ff5a52}
.dev .grid{gap:12px}
.bin{border-top:1px solid rgba(255,255,255,.14)}
.bin>summary{display:flex;align-items:center;justify-content:space-between;gap:8px;cursor:pointer;padding:12px 14px;list-style:none;font-weight:900}
.bin>summary::-webkit-details-marker{display:none}
.bin .list{max-height:0;overflow:hidden;transition:max-height .2s ease}
.bin[open] .list{max-height:70vh;overflow:auto}
.list .row{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border:1px solid var(--stroke);background:#0d0d10;border-radius:10px;margin:6px 12px}
.count{opacity:.75;font-weight:800}
.row .num{font-weight:900}
.row .chip{height:26px}
</style>
</head>
<body>
<div class="bg" aria-hidden="true"></div>

<header class="nav">
  <button class="btn-tab is-active">Courses</button>
  <button id="avatarTab" class="avatarTab">
    <span class="name" id="avatarName">User</span>
    <span class="lvl" id="avatarLvl">Admin</span>
  </button>
</header>

<main class="wrap">
  <section class="grid" id="pageGrid"></section>
</main>

<!-- Working Drawer -->
<div id="adminTab"><button id="toggleDockBtn">Working Drawer</button></div>
<div id="adminDock">
  <header>
    <div class="title">Development</div>
    <button class="chip" id="closeDock">Close</button>
  </header>
  <div class="dev"><section class="grid" id="devGrid"></section></div>
  <details class="bin" id="binArchive">
    <summary>Archive <span class="count" id="countArchive">0</span></summary>
    <div class="list" id="listArchive"></div>
  </details>
  <details class="bin" id="binTpl">
    <summary>Templates <span class="count" id="countTpl">0</span></summary>
    <div class="list" id="listTpl"></div>
  </details>
</div>

<script>
(()=>{'use strict';
const $=s=>document.querySelector(s);
const $$=s=>Array.from(document.querySelectorAll(s));
const store={get:(k,f)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};
const K={ profile:'ao_profile', settings:'ao_settings' };

function currentRole(){ return (store.get(K.profile,{skill:'admin'}).skill||'admin').toLowerCase(); }
function isAdmin(){ return currentRole()==='admin'; }

/* Avatar paint */
function applyProfile(){
  const p=store.get(K.profile,{displayName:'User',skill:'admin'});
  $('#avatarName').textContent=p.displayName||'User';
  $('#avatarLvl').textContent=p.skill.charAt(0).toUpperCase()+p.skill.slice(1);
}

/* Hero defaults */
function defaults(){
  const heroFlags={};
  for(let i=1;i<=10;i++) heroFlags[`co-${i}`]={state:'live',place:'page'};
  for(let i=11;i<=50;i++) heroFlags[`co-${i}`]={state:'off',place:'tpl'};
  return { heroFlags };
}
function getSettings(){
  const cur=store.get(K.settings,null);
  if(!cur){ const def=defaults(); store.set(K.settings,def); return def; }
  return cur;
}
function saveSettings(s){ store.set(K.settings,s); }

/* Move options */
function getMoveOptions(place){
  if(place==='page') return ['dev','archive'];
  if(place==='dev') return ['page','tpl'];
  if(place==='archive') return ['page','dev'];
  if(place==='tpl') return ['dev'];
  return [];
}

/* Hero card */
function heroCard(id, place){
  const n=id.replace('co-','');
  const s=getSettings().heroFlags[id];
  const live=s.state==='live';
  const el=document.createElement('article'); el.className='hero'; el.dataset.heroId=id; el.dataset.place=place;
  el.innerHTML=`
    <span class="num">#${n}</span>
    <div class="ctrls">
      <button class="chip ${live?'badge-live':'badge-off'}" data-act="toggle">${live?'Live':'Offline'}</button>
      <div class="move"><button class="chip" data-act="move">Move</button><div class="move-menu"></div></div>
    </div>
    <div class="cta-left"><button class="btn blue" data-act="enter">Start</button></div>`;
  const menu=el.querySelector('.move-menu');
  getMoveOptions(place).forEach(opt=>{
    const b=document.createElement('button'); b.textContent=`Move to ${opt}`; b.dataset.to=opt; menu.appendChild(b);
  });
  return el;
}

/* Painting */
function paintPage(){
  const s=getSettings(), grid=$('#pageGrid'); grid.innerHTML='';
  for(let i=1;i<=10;i++){ const id=`co-${i}`; grid.appendChild(heroCard(id,'page')); }
}
function paintDrawer(){
  const s=getSettings().heroFlags;
  const dev=$('#devGrid'); dev.innerHTML='';
  const la=$('#listArchive'); la.innerHTML='';
  const lt=$('#listTpl'); lt.innerHTML='';
  Object.entries(s).forEach(([id,f])=>{
    if(f.place==='dev') dev.appendChild(heroCard(id,'dev'));
    if(f.place==='archive'){
      const row=document.createElement('div'); row.className='row'; row.dataset.heroId=id; row.dataset.place='archive';
      row.innerHTML=`<span class="num">#${id.replace('co-','')}</span><div class="move"><button class="chip" data-act="move">Move</button><div class="move-menu"></div></div>`;
      getMoveOptions('archive').forEach(opt=>{const b=document.createElement('button'); b.textContent=`Move to ${opt}`; b.dataset.to=opt; row.querySelector('.move-menu').appendChild(b);});
      la.appendChild(row);
    }
    if(f.place==='tpl'){
      const row=document.createElement('div'); row.className='row'; row.dataset.heroId=id; row.dataset.place='tpl';
      row.innerHTML=`<span class="num">#${id.replace('co-','')}</span><div class="move"><button class="chip" data-act="move">Move</button><div class="move-menu"></div></div>`;
      getMoveOptions('tpl').forEach(opt=>{const b=document.createElement('button'); b.textContent=`Move to ${opt}`; b.dataset.to=opt; row.querySelector('.move-menu').appendChild(b);});
      lt.appendChild(row);
    }
  });
  $('#countArchive').textContent=Object.values(s).filter(f=>f.place==='archive').length;
  $('#countTpl').textContent=Object.values(s).filter(f=>f.place==='tpl').length;
}

/* Movement */
function moveHero(id,dest){
  const s=getSettings(); const cur=s.heroFlags[id];
  const allowed=getMoveOptions(cur.place); if(!allowed.includes(dest)) return;
  s.heroFlags[id]={...cur,place:dest}; saveSettings(s);
  paintPage(); paintDrawer();
}

/* Clicks */
document.addEventListener('click',e=>{
  if(e.target.closest('[data-act="enter"]')){ alert('401 — Not linked yet'); return; }
  const tgl=e.target.closest('[data-act="toggle"]'); if(tgl&&isAdmin()){const id=tgl.closest('[data-hero-id]').dataset.heroId; const s=getSettings(); s.heroFlags[id].state=s.heroFlags[id].state==='live'?'off':'live'; saveSettings(s); paintPage(); paintDrawer(); return;}
  const mvBtn=e.target.closest('[data-act="move"]'); if(mvBtn){const menu=mvBtn.parentElement.querySelector('.move-menu'); $$('.move-menu.open').forEach(m=>m.classList.remove('open')); menu.classList.toggle('open'); e.stopPropagation(); return;}
  if(e.target.matches('.move-menu button')){moveHero(e.target.closest('[data-hero-id]').dataset.heroId,e.target.dataset.to); $$('.move-menu.open').forEach(m=>m.classList.remove('open')); e.stopPropagation(); return;}
});
document.addEventListener('click',()=>{$$('.move-menu.open').forEach(m=>m.classList.remove('open'));});

/* Dock */
$('#toggleDockBtn').addEventListener('click',()=>$('#adminDock').classList.add('open'));
$('#closeDock').addEventListener('click',()=>$('#adminDock').classList.remove('open'));

/* Init */
applyProfile(); paintPage(); paintDrawer();
})();
</script>
</body>
</html>