<!DOCTYPE html>
<html lang="en-AU">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="color-scheme" content="dark" />
<title>Home — FAOA</title>
<style>
:root{
  --ink:#eef3ff; --ink-dim:#cfd3e1; --muted:rgba(238,243,255,.78);
  --bg:#000; --stroke:rgba(255,255,255,.18);
  --blue:#0A84FF; --green:#32d74b; --gold:#ffd700; --silver:#c0c7d1;
  --bronze:#b87333; --red:#ff453a; --black:#111;
  --gap:12px; --r:14px; --maxw:1240px; --nav-h:68px;
  --btn-h:44px; --btn-bottom:14px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
  font:16px -apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;
  overscroll-behavior:contain}
a{color:inherit;text-decoration:none}

/* Top nav */
.nav{position:fixed;top:0;left:0;right:0;height:var(--nav-h);
  display:flex;align-items:center;justify-content:space-between;gap:8px;
  padding:8px 12px;z-index:40;background:linear-gradient(180deg,rgba(0,0,0,.9),rgba(0,0,0,.5));
  -webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}
.nav-left{display:flex;gap:8px;align-items:center}
.btn-tab{display:inline-flex;align-items:center;justify-content:center;min-width:100px;height:44px;padding:0 12px;
  border-radius:12px;border:1px solid var(--stroke);background:rgba(0,0,0,.55);
  color:var(--ink);font-weight:900;cursor:pointer;font-size:15px}
.btn-tab.is-active{background:var(--blue);border-color:transparent;color:#000}

/* Avatar pill */
.avatarTab{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;
  padding:6px 12px;border-radius:12px;min-width:132px;height:44px;
  font-weight:900;line-height:1.1;text-align:left;cursor:pointer;
  border:1px solid var(--stroke);background:#222}
.avatarTab .name{font-size:15px;font-weight:900}
.avatarTab .lvl{font-size:12px;opacity:.95;text-transform:capitalize}

/* Content wrap */
.wrap{max-width:var(--maxw);margin:0 auto;
  padding:calc(var(--nav-h) + 10px) 14px 80px}

/* Heroes */
.hero{position:relative;overflow:hidden;background:#000;
  border:1px solid var(--stroke);border-radius:16px;padding:16px;margin:12px 0}
.hero .title{margin:0 0 6px;font-weight:900;font-size:20px}
.hero .meta{margin:0 0 6px;color:var(--ink-dim)}
.hero .desc{margin:8px 0 56px;color:var(--muted)}
.hero[data-state="newRelease"]::before{
  content:"NEW";position:absolute;top:8px;right:12px;background:var(--red);
  color:#fff;font-size:11px;font-weight:900;padding:2px 6px;border-radius:8px}

/* Panels */
[data-panel]{display:none}
[data-panel].panel-active{display:block}

/* Admin bar */
#adminBar{position:fixed;bottom:0;left:0;right:0;height:44px;
  background:#111;border-top:1px solid var(--stroke);display:none;
  align-items:center;justify-content:center;gap:12px;z-index:90}
#adminBar button{background:var(--blue);color:#000;border:none;
  padding:6px 12px;border-radius:8px;font-weight:900;cursor:pointer}

/* Admin-only hidden heroes */
#adminHidden{display:none;position:fixed;bottom:44px;left:0;right:0;
  max-height:40vh;overflow:auto;background:#0a0a0a;border-top:2px solid var(--red);z-index:80}
#adminHidden .hero{opacity:.6}
</style>
</head>
<body>
<header class="nav">
  <div class="nav-left" role="tablist">
    <button class="btn-tab is-active" data-tab="news">News</button>
    <button class="btn-tab" data-tab="challenges">Challenges</button>
    <button class="btn-tab" data-tab="courses">Courses</button>
    <button class="btn-tab" data-tab="live">Live</button>
  </div>
  <div class="nav-right">
    <button id="avatarTab" class="avatarTab">
      <span class="name" id="avatarName">User</span>
      <span class="lvl" id="avatarLvl">Silver</span>
    </button>
  </div>
</header>

<main class="wrap">
  <!-- News -->
  <section id="panel-news" class="panel-active" data-panel="news"></section>

  <!-- Challenges -->
  <section id="panel-challenges" data-panel="challenges"></section>

  <!-- Courses -->
  <section id="panel-courses" data-panel="courses"></section>

  <!-- Live -->
  <section id="panel-live" data-panel="live"></section>
</main>

<!-- Admin bottom bar -->
<div id="adminBar"><button id="toggleConfig">Toggle Config Mode</button></div>

<!-- Admin hidden heroes -->
<div id="adminHidden"></div>

<script>
(()=>{'use strict';
const $=s=>document.querySelector(s);
const $$=s=>Array.from(document.querySelectorAll(s));
const store={get:(k,f)=>{try{const v=localStorage.getItem(k);return v?JSON.parse(v):f}catch{return f}},
             set:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};

const K={profile:'ao_profile',settings:'ao_settings'};
const cap=s=>(s||'').replace(/\b\w/g,m=>m.toUpperCase());

/* Roles */
function getRole(){const p=store.get(K.profile,{skill:'silver'});return(p.skill||'silver').toLowerCase();}
function isAdmin(){return getRole()==='admin';}
function isDirector(){return getRole()==='director';}
function isSupport(){return getRole()==='support';}

/* Settings scaffold */
function getSettings(){
  const def={configMode:false,heroes:{}};
  const cur=store.get(K.settings,null);if(!cur){store.set(K.settings,def);return def;}
  return Object.assign({},def,cur);
}
let settings=getSettings();

/* Hero creation */
function createHero(id,tab){
  const h=document.createElement('article');
  h.className='hero';
  h.dataset.heroId=id;
  h.dataset.state='active';
  h.innerHTML=`<h2 class="title">Placeholder Hero ${id}</h2>
    <p class="meta">Coming Soon</p>
    <p class="desc">Content will appear here once configured.</p>`;
  $(\`#panel-\${tab}\`).appendChild(h);
  return h;
}

/* Build heroes: 5 per tab */
['news','challenges','courses','live'].forEach(tab=>{
  for(let i=1;i<=5;i++){
    const id=\`\${tab}-hero\${i}\`;
    const hero=createHero(id,tab);
    const st=settings.heroes[id]||{state:'active'};
    hero.dataset.state=st.state;
    if(st.title) hero.querySelector('.title').textContent=st.title;
    if(st.desc) hero.querySelector('.desc').textContent=st.desc;
  }
});

/* Apply visibility per role */
function applyHeroVisibility(){
  $$('.hero').forEach(h=>{
    const id=h.dataset.heroId;
    const cfg=settings.heroes[id]||{state:'active'};
    const role=getRole();
    let show=false;
    if(cfg.state==='active') show=true;
    if(cfg.state==='newRelease') show=true;
    if(cfg.state==='setToExpire'){if(!cfg.expiryDate||Date.now()<Date.parse(cfg.expiryDate)) show=true;}
    if(isAdmin()){show=true;}
    if(isDirector()&&cfg.state==='underDevelopment') show=false;
    if(isSupport()&&cfg.state!=='active'&&cfg.state!=='newRelease') show=false;
    h.style.display=show?'':'none';
  });
  if(isAdmin()){$('#adminBar').style.display='flex';$('#adminHidden').style.display='block';}
}
applyHeroVisibility();

/* Tabs */
const tabBtns=$$('.btn-tab');
function showTab(name){
  tabBtns.forEach(b=>b.classList.toggle('is-active',b.dataset.tab===name));
  $$('[data-panel]').forEach(p=>p.classList.toggle('panel-active',p.dataset.panel===name));
  window.scrollTo({top:0});
}
tabBtns.forEach(b=>b.addEventListener('click',()=>showTab(b.dataset.tab)));

/* Config mode */
$('#toggleConfig').addEventListener('click',()=>{
  settings.configMode=!settings.configMode;
  store.set(K.settings,settings);
  location.reload();
});
if(settings.configMode&&isAdmin()){
  $$('.hero').forEach(h=>{
    const t=h.querySelector('.title');
    const btn=document.createElement('button');btn.textContent='✎';btn.style.marginLeft='8px';
    btn.addEventListener('click',()=>{
      const val=prompt('Edit title',t.textContent);if(val){t.textContent=val;settings.heroes[h.dataset.heroId]={...(settings.heroes[h.dataset.heroId]||{}),title:val};store.set(K.settings,settings);}
    });
    t.appendChild(btn);
    const sel=document.createElement('select');
    ['active','hidden','underDevelopment','newRelease','setToExpire'].forEach(s=>{
      const o=document.createElement('option');o.value=s;o.textContent=s;o.selected=h.dataset.state===s;sel.appendChild(o);
    });
    sel.addEventListener('change',()=>{
      h.dataset.state=sel.value;
      settings.heroes[h.dataset.heroId]={...(settings.heroes[h.dataset.heroId]||{}),state:sel.value};
      store.set(K.settings,settings);applyHeroVisibility();
    });
    h.appendChild(sel);
  });
}
})();
</script>
</body>
</html>